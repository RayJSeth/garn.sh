#!/usr/bin/env bash
set -euo pipefail

if command -v unzip >/dev/null 2>&1; then
  echo "unzip is already installed."
  exit 0
fi

echo "unzip not found. Attempting to install..."

install_unzip_with_pkgmgr() {
  if command -v apt-get >/dev/null 2>&1; then
    sudo apt-get update
    sudo apt-get install -y unzip
    return 0
  elif command -v dnf >/dev/null 2>&1; then
    sudo dnf install -y unzip
    return 0
  elif command -v yum >/dev/null 2>&1; then
    sudo yum install -y unzip
    return 0
  elif command -v pacman >/dev/null 2>&1; then
    sudo pacman -Sy --noconfirm unzip
    return 0
  elif command -v apk >/dev/null 2>&1; then
    sudo apk add unzip
    return 0
  else
    return 1
  fi
}

if install_unzip_with_pkgmgr; then
  echo "unzip installed successfully via package manager."
  exit 0
else
  echo "Failed to install unzip â€” please install it manually." >&2
  exit 1
fi

